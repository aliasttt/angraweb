{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% trans "Angraweb.com - Professional Web Design and E-commerce" %}{% endblock %}</title>
    
    <!-- Meta Tags for SEO -->
    {% block meta %}
    <meta name="description" content="{% block meta_description %}{% trans 'Professional web design, e-commerce development, mobile app design, and SEO services. Grow your business in the digital world!' %}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}web design, ecommerce, mobile app, SEO, hosting, UI/UX design, {% trans 'web development' %}{% endblock %}">
    <meta name="author" content="Angraweb.com">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:title" content="{% block og_title %}{% trans "Angraweb.com - Professional Web Design and E-commerce" %}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{% trans 'Professional web design and development services. Grow your business in the digital world!' %}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}{% static 'angraweb.jpg' %}{% endblock %}">
    <meta property="og:locale" content="tr_TR">
    <meta property="og:site_name" content="Angraweb.com">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ request.build_absolute_uri }}">
    <meta name="twitter:title" content="{% block twitter_title %}{% trans "Angraweb.com - Professional Web Design and E-commerce" %}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{% trans 'Professional web design and development services. Grow your business in the digital world!' %}{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}{% static 'angraweb.jpg' %}{% endblock %}">
    {% endblock %}
    
    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Angraweb.com",
      "url": "{{ request.scheme }}://{{ request.get_host }}",
      "logo": "{{ request.scheme }}://{{ request.get_host }}{% static 'angraweb.jpg' %}",
      "description": "{% trans 'Professional web design and development services. Grow your business in the digital world!' %}",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "TR"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+90-534-038-23-35",
        "contactType": "customer service",
        "email": "aliasadi3853@gmail.com",
        "availableLanguage": ["tr"],
        "areaServed": "TR"
      },
      "sameAs": [
        "https://www.instagram.com/angrawebtr",
        "https://t.me/Ali_asadiz_ttt",
        "https://github.com/aliasttt"
      ],
      "offers": {
        "@type": "Offer",
        "category": "Web Tasarım Hizmetleri"
      }
    }
    </script>
    
    <script>
    function gtag_report_conversion(url) {
      var callback = function () {
        if (typeof(url) != 'undefined') {
          window.location = url;
        }
      };
      if (typeof window.gtag !== 'function') {
        callback();
        return false;
      }
      gtag('event', 'conversion', {
          'send_to': 'AW-17220061979/ooaBCLKXr5AbEJuWlZNA',
          'event_callback': callback
      });
      return false;
    }
    </script>
    
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}?v=2">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons@7.2.3/css/flag-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <script>
      // Provide STATIC_URL to JS for dynamic asset URLs (certificates/photos)
      window.STATIC_URL = "{% get_static_prefix %}";
    </script>
    <!-- Background Animation -->
    <div class="space-background">
        <div class="stars"></div>
        <div class="twinkling"></div>
        <div class="planets">
            <div class="planet planet-1"></div>
            <div class="planet planet-2"></div>
            <div class="planet planet-3"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'index' %}">
                <i class="fas fa-rocket"></i> Angraweb.com
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'index' %}active{% endif %}" href="{% url 'index' %}">{% trans "Home" %}</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle {% if 'package' in request.resolver_match.url_name %}active{% endif %}" href="#" id="packagesDropdown" role="button" data-bs-toggle="dropdown">
                            {% trans "Packages" %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'packages_list' %}">{% trans "All Packages" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'packages_compare' %}">{% trans "Compare Packages" %}</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}" href="{% url 'about' %}">{% trans "About" %}</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle {% if 'service' in request.resolver_match.url_name or 'web_design' in request.resolver_match.url_name or 'mobile_app' in request.resolver_match.url_name or 'ecommerce' in request.resolver_match.url_name %}active{% endif %}" href="#" id="servicesDropdown" role="button" data-bs-toggle="dropdown">
                            {% trans "Services" %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'services_list' %}">{% trans "All Services" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'web_design' %}">{% trans "Web Design" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'mobile_app' %}">{% trans "Mobile App Design" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'ecommerce' %}">{% trans "E-commerce" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'seo_services' %}">{% trans "SEO Services" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'hosting_services' %}">{% trans "Hosting Services" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'ui_ux_design' %}">{% trans "UI/UX Design" %}</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle {% if 'project' in request.resolver_match.url_name or 'case' in request.resolver_match.url_name %}active{% endif %}" href="#" id="projectsDropdown" role="button" data-bs-toggle="dropdown">
                            {% trans "Projects" %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'projects_list' %}">{% trans "All Projects" %}</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'resume' %}active{% endif %}" href="{% url 'resume' %}">{% trans "Resume" %}</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle {% if 'how_it_works' in request.resolver_match.url_name or 'calculator' in request.resolver_match.url_name or 'technology' in request.resolver_match.url_name %}active{% endif %}" href="#" id="toolsDropdown" role="button" data-bs-toggle="dropdown">
                            {% trans "Tools" %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'how_it_works' %}">{% trans "How It Works" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'price_calculator' %}">{% trans "Price Calculator" %}</a></li>
                            <li><a class="dropdown-item" href="{% url 'technology_stack' %}">{% trans "Technology Stack" %}</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}" href="{% url 'contact' %}">{% trans "Contact" %}</a>
                    </li>
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'dashboard' %}">{% trans "Hello" %}, {{ user.first_name|default:user.username }}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}">{% trans "Logout" %}</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">{% trans "Login" %}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'register' %}">{% trans "Register" %}</a>
                    </li>
                    {% endif %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            {% get_current_language as CURRENT_LANGUAGE %}
                            {% if CURRENT_LANGUAGE == 'tr' or not CURRENT_LANGUAGE %}
                                <span class="fi fi-tr me-1"></span> TR
                            {% elif CURRENT_LANGUAGE == 'en' %}
                                <span class="fi fi-gb me-1"></span> EN
                            {% else %}
                                <i class="fas fa-globe me-1"></i> {% trans "Language" %}
                            {% endif %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item {% if CURRENT_LANGUAGE == 'tr' or not CURRENT_LANGUAGE %}active{% endif %}" href="{% url 'switch_lang' 'tr' %}?next={{ request.get_full_path|urlencode }}">
                                    <span class="fi fi-tr me-2"></span> Türkçe
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item {% if CURRENT_LANGUAGE == 'en' %}active{% endif %}" href="{% url 'switch_lang' 'en' %}?next={{ request.get_full_path|urlencode }}">
                                    <span class="fi fi-gb me-2"></span> English
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="socialDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-share-alt"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="https://www.instagram.com/angrawebtr" target="_blank"><i class="fab fa-instagram me-2"></i>{% trans "Instagram" %}</a></li>
                            <li><a class="dropdown-item" href="https://t.me/Ali_asadiz_ttt" target="_blank"><i class="fab fa-telegram me-2"></i>{% trans "Telegram" %}</a></li>
                            <li><a class="dropdown-item" href="https://github.com/aliasttt" target="_blank"><i class="fab fa-github me-2"></i>{% trans "GitHub" %}</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Messages (on login page errors are shown as alert only) -->
    {% if messages and request.resolver_match.url_name != 'login' %}
    <div class="container mt-5 pt-5">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    {% block content %}{% endblock %}

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="footer-brand">
                        <h4 class="footer-title">
                            <i class="fas fa-rocket"></i> Angraweb.com
                        </h4>
                        <p class="footer-description">
                            {% trans "Professional web design and development services. Grow your business in the digital world with modern, fast and user-friendly websites." %}
                        </p>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="footer-title">{% trans "Quick Links" %}</h5>
                    <ul class="footer-links">
                        <li><a href="{% url 'index' %}">{% trans "Home" %}</a></li>
                        <li><a href="{% url 'packages_list' %}">{% trans "Packages" %}</a></li>
                        <li><a href="{% url 'about' %}">{% trans "About" %}</a></li>
                        <li><a href="{% url 'services_list' %}">{% trans "Services" %}</a></li>
                        <li><a href="{% url 'projects_list' %}">{% trans "Projects" %}</a></li>
                        <li><a href="{% url 'resume' %}">{% trans "Resume" %}</a></li>
                        <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="footer-title">{% trans "More" %}</h5>
                    <ul class="footer-links">
                        <li><a href="{% url 'sitemap' %}">{% trans "Sitemap" %}</a></li>
                        <li><a href="{% url 'privacy_policy' %}">{% trans "Privacy Policy" %}</a></li>
                        <li><a href="{% url 'terms_conditions' %}">{% trans "Terms & Conditions" %}</a></li>
                        <li><a href="{% url 'guarantee' %}">{% trans "Our Guarantee" %}</a></li>
                        <li><a href="{% url 'faq_list' %}">{% trans "FAQ" %}</a></li>
                        <li><a href="{% url 'testimonials_list' %}">{% trans "Testimonials" %}</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="footer-title">{% trans "Contact Information" %}</h5>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:aliasadi3853@gmail.com">aliasadi3853@gmail.com</a>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <a href="tel:+905340382335">+90 534 038 23 35</a>
                        </li>
                        <li>
                            <i class="fab fa-whatsapp"></i>
                            <a href="https://wa.me/905340382335" target="_blank">{% trans "WhatsApp" %}</a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <h5 class="footer-title">{% trans "Newsletter" %}</h5>
                    <p class="footer-description mb-3">{% trans "Subscribe to our newsletter for updates and special offers." %}</p>
                    <form method="post" action="{% url 'newsletter_subscribe' %}" class="newsletter-form" id="newsletterForm">
                        {% csrf_token %}
                        <div class="input-group mb-2">
                            <input type="email" name="email" class="form-control" 
                                   placeholder="{% trans 'Your email' %}" required>
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <input type="text" name="name" class="form-control" 
                               placeholder="{% trans 'Your name (optional)' %}">
                    </form>
                    <div class="footer-social-links mt-3">
                        <a href="https://www.instagram.com/angrawebtr" class="footer-social-link" target="_blank">
                            <i class="fab fa-instagram"></i>
                            <span>{% trans "Instagram" %}</span>
                        </a>
                        <a href="https://t.me/Ali_asadiz_ttt" class="footer-social-link" target="_blank">
                            <i class="fab fa-telegram"></i>
                            <span>{% trans "Telegram" %}</span>
                        </a>
                        <a href="https://github.com/aliasttt" class="footer-social-link" target="_blank">
                            <i class="fab fa-github"></i>
                            <span>{% trans "GitHub" %}</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="footer-bottom">
                        <p>&copy; 2024 Angraweb.com. {% trans "All rights reserved." %}</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" style="display: none;" aria-label="{% trans 'Back to top' %}">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- WhatsApp Fixed Button -->
    <a href="https://wa.me/905340382335?text=Merhaba! Teklif almak istiyorum." class="whatsapp-fixed-container" target="_blank" onclick="return gtag_report_conversion('https://wa.me/905340382335')">
        <span class="whatsapp-icon"><i class="fab fa-whatsapp"></i></span>
        <span class="whatsapp-quote-text">{% trans "Get Quote" %}</span>
    </a>

    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script defer src="{% static 'js/main.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
    
    <script>
      (function(){
        var loaded = false;
        function loadGtag(){
          if (loaded) return; loaded = true;
          window.dataLayer = window.dataLayer || [];
          function gtag(){ dataLayer.push(arguments); }
          window.gtag = gtag;
          var s = document.createElement('script');
          s.async = true;
          s.src = 'https://www.googletagmanager.com/gtag/js?id=G-HNM9ZF7K7Z';
          s.onload = function(){
            try {
              gtag('js', new Date());
              gtag('config', 'G-HNM9ZF7K7Z');
              gtag('config', 'AW-17220061979');
            } catch (e) {}
          };
          document.head.appendChild(s);
        }
        var ric = window.requestIdleCallback || function(cb){ setTimeout(cb, 1500); };
        window.addEventListener('load', function(){ ric(loadGtag); });
      })();
    </script>
</body>
</html>
